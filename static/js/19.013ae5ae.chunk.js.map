{"version":3,"sources":["components/SharedStyledComponents/Form.styled.ts","components/Loader/Loader.styled.ts","components/Loader/Loader.tsx","views/VideoChat/VideoChat.styled.ts","views/VideoChat/VideoChat.tsx"],"names":["InfoBadge","styled","span","ErrorBadge","FormStyled","Form","BREAKPOINTS","md","sm","FormGroup","div","FormGroup2","FieldStyled","Field","COLORS","blue","ErrorMessageStyled","ErrorMessage","LabelStyled","label","SubmitButton","button","darkblue","light","FormInfo","Option","option","FormInfoContainer","LoaderStyled","LoaderWrapper","Loader","localStream","peerConnection","VideoChatStyled","NAV_HEADROOM","ChatSection","VideoSection","MainVideo","video","SmallVideo","VideoInfo","Cont","mediaStreamConstraints","audio","config","iceServers","urls","mapDispatchToProps","push","connect","state","currentUser","auth","props","useState","localAudioActive","setLocalAudioActive","localVideoActive","setLocalVideoActive","remoteAudioActive","setRemoteAudioActive","remoteVideoActive","setRemoteVideoActive","isRemoteInRoom","setRemoteInRoom","user","setUser","localVideoRef","useRef","remoteVideoRef","useEffect","Profile","getUser","match","params","id","then","res","status","console","log","data","setTimeout","catch","err","socket","emit","on","gotMessageFromServer","start","getWebCam","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","mediaDevices","getUserMediaSuccess","errorHandler","alert","hangUp","stream","current","srcObject","isCaller","RTCPeerConnection","onicecandidate","gotIceCandidate","ontrack","gotRemoteStream","addStream","createOffer","createdDescription","sdp","setRemoteDescription","RTCSessionDescription","type","createAnswer","ice","addIceCandidate","RTCIceCandidate","event","candidate","description","setLocalDescription","localDescription","streams","error","getTracks","stop","forEach","track","close","ref","autoPlay","playsinline","displayName","onClick","tracks","getAudioTracks","i","length","enabled","toggleAudio","getVideoTracks","toggleVideo","String","checked","disabled"],"mappings":"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","file":"static/js/19.013ae5ae.chunk.js","sourcesContent":["import styled from \"styled-components\";\nimport { Form, Field, ErrorMessage } from \"formik\";\nimport { COLORS, BREAKPOINTS } from \"../../styles/variables\";\n\nexport const InfoBadge = styled.span`\n    width: 100%;\n    padding: 0.8rem;\n    border-radius: 5px;\n    font-size: 1.4rem;\n    background: #fff87d;\n`;\n\nexport const ErrorBadge = styled.span`\n    width: 100%;\n    padding: 0.8rem;\n    font-size: 1.4rem;\n    border-radius: 5px;\n    color: white;\n    background: #ff4230;\n`;\n\nexport const FormStyled = styled(Form)`\n    -webkit-box-shadow: 0px 2px 10px 1px rgba(0, 0, 0, 0.2);\n    -moz-box-shadow: 0px 2px 10px 1px rgba(0, 0, 0, 0.2);\n    box-shadow: 0px 2px 10px 1px rgba(0, 0, 0, 0.2);\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 2rem;\n    font-size: 1.5rem;\n    width: 50%;\n\n    @media (max-width: ${BREAKPOINTS.md}) {\n        padding: 1rem;\n        width: 80%;\n    }\n    @media (max-width: ${BREAKPOINTS.sm}) {\n        padding: 1rem;\n        width: 100%;\n    }\n`;\n\nexport const FormGroup = styled.div`\n    margin-top: 1rem;\n    width: 100%;\n    position: relative;\n`;\n\nexport const FormGroup2 = styled.div`\n    margin-top: 1rem;\n    width: 100%;\n    position: relative;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 1rem;\n`\n\nexport const FieldStyled = styled(Field)`\n    width: 100%;\n    background: none;\n    border: none;\n    box-sizing: border-box;\n    padding: 0.8rem;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n    transition: all 0.2s;\n\n    :focus {\n        outline: none;\n        border: 1px solid ${COLORS.blue};\n        box-shadow: 0 0 5px ${COLORS.blue};\n    }\n\n    &[type=\"radio\"] {\n        outline: none;\n        border: none;\n        box-shadow: none;\n        cursor: pointer;\n        width: 1.6rem;\n        height: 1.6rem;\n    }\n`;\n\nexport const ErrorMessageStyled = styled(ErrorMessage)`\n    box-sizing: border-box;\n    width: 100%;\n    color: red;\n    padding: 0 0.8rem;\n    font-size: 1.2rem;\n`;\n\nexport const LabelStyled = styled.label`\n    box-sizing: border-box;\n    display: block;\n    width: 100%;\n    padding: 0 0.8rem;\n    font-size: 1.2rem;\n`;\n\ntype SubmitButtonProps = {\n    light?: boolean\n}\n\nexport const SubmitButton = styled.button<SubmitButtonProps>`\n    width: 100%;\n    background: none;\n    border: none;\n    padding: 1rem 2rem;\n    color: white;\n    cursor: pointer;\n    background: ${COLORS.blue};\n    border-radius: 5px;\n    transition: background 0.2s;\n\n    :hover {\n        background: ${COLORS.darkblue};\n    }\n\n    ${({ light }) =>\n        light && `\n            background: #226aff;\n            :hover {\n                background: #042bfc;\n            }\n        `\n    }\n`;\n\nexport const FormInfo = styled.div`\n    width: 100%;\n    font-weight: bold;\n`;\n\nexport const Option = styled.option`\n    \n`\nexport const FormInfoContainer = styled.div`\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    padding-bottom: 1rem;\n`","import styled from \"styled-components\";\nimport { COLORS } from \"../../styles/variables\";\n\nexport const LoaderStyled = styled.div`\n    display: inline-block;\n    position: relative;\n    width: 64px;\n    height: 64px;\n    z-index: 1000;\n    div {\n        position: absolute;\n        top: 27px;\n        width: 11px;\n        height: 11px;\n        border-radius: 50%;\n        background: ${COLORS.blue};\n        animation-timing-function: cubic-bezier(0, 1, 1, 0);\n    }\n    div:nth-child(1) {\n        left: 6px;\n        animation: lds-ellipsis1 0.6s infinite;\n    }\n    div:nth-child(2) {\n        left: 6px;\n        animation: lds-ellipsis2 0.6s infinite;\n    }\n    div:nth-child(3) {\n        left: 26px;\n        animation: lds-ellipsis2 0.6s infinite;\n    }\n    div:nth-child(4) {\n        left: 45px;\n        animation: lds-ellipsis3 0.6s infinite;\n    }\n    @keyframes lds-ellipsis1 {\n        0% {\n            transform: scale(0);\n        }\n        100% {\n            transform: scale(1);\n        }\n    }\n    @keyframes lds-ellipsis3 {\n        0% {\n            transform: scale(1);\n        }\n        100% {\n            transform: scale(0);\n        }\n    }\n    @keyframes lds-ellipsis2 {\n        0% {\n            transform: translate(0, 0);\n        }\n        100% {\n            transform: translate(19px, 0);\n        }\n    }\n`;\n\nexport const LoaderWrapper = styled.div`\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`","import React from \"react\";\nimport { LoaderStyled, LoaderWrapper } from \"./Loader.styled\";\n\nconst Loader = () => {\n    return (\n        <LoaderWrapper>\n            <LoaderStyled>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n            </LoaderStyled>\n        </LoaderWrapper>\n    );\n};\n\nexport default Loader;\n","import styled from 'styled-components'\nimport { NAV_HEADROOM } from '../../styles/variables'\n\nexport const VideoChatStyled = styled.div`\n    position: relative;\n    height: calc(100vh - ${NAV_HEADROOM});\n    display: grid;\n    grid-template-columns: 2fr 1fr;\n    box-sizing: border-box;\n    grid-gap: 0.5rem;\n`\n\nexport const ChatSection = styled.div`\n    position: relative;\n    height: 100%;\n    box-sizing: border-box;\n    border-left: 1px solid #ccc;\n`\n\nexport const VideoSection = styled.div`\n    position: relative;\n    height: 100%;\n    box-sizing: border-box;\n    overflow: hidden;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`\n\nexport const MainVideo = styled.video`\n    position: absolute;\n    top: 50%; \n    left: 50%;\n    transform: translateX(-50%) translateY(-50%);\n    min-width: 100%; \n    min-height: 100%; \n    width: auto; \n    height: auto;\n    z-index: -1000; \n    overflow: hidden;\n`\n\nexport const SmallVideo = styled.video`\n    border: 1px solid #ccc;\n    position: absolute;\n    bottom: 0.5rem;\n    right: 0.5rem;\n    height: 20%;\n    filter: opacity(1);\n`\n\nexport const VideoInfo = styled.div`\n    font-weight: bold;\n    font-size: 1.8rem;\n`\n\nexport const Cont = styled.div`\n    \n`","import React, { useRef, useEffect, useState } from \"react\";\nimport { VideoChatStyled, VideoSection, ChatSection, MainVideo, SmallVideo, VideoInfo, Cont } from \"./VideoChat.styled\";\nimport { ApplicationState } from \"../../store\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { socket, Profile } from \"../../api\";\nimport { push } from \"connected-react-router\";\nimport { connect } from \"react-redux\";\nimport Loader from \"../../components/Loader/Loader\";\nimport { FormGroup, LabelStyled } from \"../../components/SharedStyledComponents/Form.styled\";\n\ninterface MatchParams {\n    id: string;\n}\n\ntype Props = RouteComponentProps<MatchParams> & ReturnType<typeof mapStateToProps> & typeof mapDispatchToProps & {};\n\nlet localStream: any;\nlet peerConnection: any;\n\nconst mediaStreamConstraints = {\n    video: true,\n    audio: true\n};\nconst config: RTCConfiguration = {\n    iceServers: [{ urls: \"stun:stun.stunprotocol.org:3478\" }, { urls: \"stun:stun.l.google.com:19302\" }]\n};\n\nconst VideoChat = (props: Props) => {\n    const [localAudioActive, setLocalAudioActive] = useState(true);\n    const [localVideoActive, setLocalVideoActive] = useState(true);\n\n    const [remoteAudioActive, setRemoteAudioActive] = useState(false);\n    const [remoteVideoActive, setRemoteVideoActive] = useState(false);\n    const [isRemoteInRoom, setRemoteInRoom] = useState(false);\n    const [user, setUser] = useState();\n\n    const localVideoRef = useRef(null);\n    const remoteVideoRef = useRef(null);\n\n    // @ts-ignore\n\n    useEffect(() => {\n        Profile.getUser(props.match.params.id)\n            .then(res => {\n                if (res.status === 200) {\n                    console.log(res.data);\n                    setUser(res.data);\n                } else {\n                    setTimeout(() => {\n                        props.push(\"/\");\n                    }, 500);\n                }\n            })\n            .catch(err => {\n                setTimeout(() => {\n                    props.push(\"/\");\n                }, 500);\n            });\n\n        socket.emit(\"WEBRTC_JOIN\", { id: props.match.params.id, audio: localAudioActive, video: localVideoActive });\n        socket.on(\"WEBRTC\", (data: any) => {\n            gotMessageFromServer(data);\n        });\n\n        socket.on(\"WEBRTC_STATUS_CHANGED\", (data: any) => {\n            if (data.id !== props.currentUser.id) {\n                setRemoteAudioActive(data.audio);\n                setRemoteVideoActive(data.video);\n            }\n        });\n\n        socket.on(\"WEBRTC_JOINED\", (data: any) => {\n            setRemoteInRoom(true);\n            if (!peerConnection) {\n                start(true);\n            }\n            if (data.id !== props.currentUser.id) {\n                setRemoteAudioActive(data.audio);\n                setRemoteVideoActive(data.video);\n            }\n        });\n\n        socket.on(\"WEBRTC_LEFT\", () => {\n            setRemoteInRoom(false);\n        });\n\n        let getWebCam =\n            navigator.getUserMedia ||\n            navigator.webkitGetUserMedia ||\n            navigator.mozGetUserMedia ||\n            navigator.mozGetUserMedia ||\n            navigator.msGetUserMedia;\n\n        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n            navigator.mediaDevices\n                .getUserMedia(mediaStreamConstraints)\n                .then(getUserMediaSuccess)\n                .catch(errorHandler);\n            // @ts-ignore\n        } else if (getWebCam) {\n            // @ts-ignore\n            getWebCam(mediaStreamConstraints, getUserMediaSuccess, errorHandler);\n        } else {\n            alert(\"Your browser does not support getUserMedia API\");\n        }\n    }, []);\n\n    useEffect(() => {\n        return () => {\n            socket.emit(\"WEBRTC_LEAVE\", { id: props.match.params.id });\n            hangUp();\n        };\n    }, []);\n\n    const getUserMediaSuccess = (stream: any) => {\n        localStream = stream;\n        // @ts-ignore\n        localVideoRef.current.srcObject = stream;\n    };\n\n    const start = (isCaller: boolean) => {\n        peerConnection = new RTCPeerConnection(config);\n        peerConnection.onicecandidate = gotIceCandidate;\n        peerConnection.ontrack = gotRemoteStream;\n        peerConnection.addStream(localStream);\n\n        if (isCaller) {\n            peerConnection\n                .createOffer()\n                .then(createdDescription)\n                .catch(errorHandler);\n        }\n    };\n\n    const gotMessageFromServer = (data: any) => {\n        if (!peerConnection) start(false);\n\n        if (data.sdp) {\n            peerConnection\n                .setRemoteDescription(new RTCSessionDescription(data.sdp))\n                .then(function() {\n                    // Only create answers in response to offers\n                    if (data.sdp.type === \"offer\") {\n                        peerConnection\n                            .createAnswer()\n                            .then(createdDescription)\n                            .catch(errorHandler);\n                    }\n                })\n                .catch(errorHandler);\n        } else if (data.ice) {\n            peerConnection.addIceCandidate(new RTCIceCandidate(data.ice)).catch(errorHandler);\n        }\n    };\n\n    const gotIceCandidate = (event: any) => {\n        if (event.candidate != null) {\n            socket.emit(\"WEBRTC_SEND\", { ice: event.candidate, id: props.match.params.id });\n        }\n    };\n\n    const createdDescription = (description: any) => {\n        console.log(\"got description\");\n\n        peerConnection\n            .setLocalDescription(description)\n            .then(function() {\n                socket.emit(\"WEBRTC_SEND\", { sdp: peerConnection.localDescription, id: props.match.params.id });\n            })\n            .catch(errorHandler);\n    };\n\n    const gotRemoteStream = (event: any) => {\n        console.log(\"got remote stream\");\n        // @ts-ignore\n        remoteVideoRef.current.srcObject = event.streams[0];\n    };\n\n    const errorHandler = (error: any) => {\n        console.log(error);\n    };\n\n    const toggleAudio = () => {\n        setLocalAudioActive(!localAudioActive);\n        let tracks = localStream.getAudioTracks();\n        for (var i = 0; i < tracks.length; ++i) {\n            tracks[i].enabled = !tracks[i].enabled;\n        }\n        socket.emit(\"WEBRTC_CHANGE_STATUS\", { audio: localAudioActive, video: localVideoActive, id: props.match.params.id });\n    };\n\n    const toggleVideo = () => {\n        setLocalVideoActive(!localVideoActive);\n\n        let tracks = localStream.getVideoTracks();\n        for (var i = 0; i < tracks.length; ++i) {\n            tracks[i].enabled = !tracks[i].enabled;\n        }\n        socket.emit(\"WEBRTC_CHANGE_STATUS\", { audio: localAudioActive, video: localVideoActive, id: props.match.params.id });\n    };\n\n    const hangUp = () => {\n        if (localStream) {\n            if (typeof localStream.getTracks === \"undefined\") {\n                // Support legacy browsers, like phantomJs we use to run tests.\n                localStream.stop();\n            } else {\n                localStream.getTracks().forEach((track: any) => {\n                    track.stop();\n                });\n            }\n            localStream = null;\n        }\n\n        if (peerConnection) {\n            peerConnection.close();\n            peerConnection = null;\n        }\n    };\n\n    return (\n        <VideoChatStyled>\n            <VideoSection>\n                {peerConnection ? (\n                    <MainVideo ref={remoteVideoRef} autoPlay playsinline></MainVideo>\n                ) : (\n                    user && (\n                        <Cont>\n                            <VideoInfo>Oczekiwanie na {user.displayName}...</VideoInfo>\n                            <Loader></Loader>\n                        </Cont>\n                    )\n                )}\n\n                <SmallVideo ref={localVideoRef} autoPlay playsinline></SmallVideo>\n            </VideoSection>\n            <ChatSection>\n                {props.match.params.id}\n                {/* <button onClick={() => start(true)}>start</button> */}\n                <button onClick={() => toggleAudio()}>toggle audio</button>\n                <button onClick={() => toggleVideo()}>toggle video</button>\n                <div>local audio: {String(localAudioActive)}</div>\n                <div>local video: {String(localVideoActive)}</div>\n                <div>remote audio: {String(remoteAudioActive)}</div>\n                <div>remote video: {String(remoteVideoActive)}</div>\n                <div>is remote in room: {String(isRemoteInRoom)}</div>\n                <FormGroup>\n                    <LabelStyled>remote audio</LabelStyled>\n                    <input type=\"checkbox\" checked={remoteAudioActive} disabled/>\n                </FormGroup>\n                <FormGroup>\n                    <LabelStyled>remote vido</LabelStyled>\n                    <input type=\"checkbox\" checked={remoteVideoActive} disabled/>\n                </FormGroup>\n            </ChatSection>\n        </VideoChatStyled>\n    );\n};\n\nconst mapStateToProps = (state: ApplicationState) => {\n    return { currentUser: state.auth.currentUser };\n};\n\nconst mapDispatchToProps = {\n    push\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VideoChat);\n"],"sourceRoot":""}